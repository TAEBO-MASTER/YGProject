<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìµœì  ë¯¸íŒ… ì¥ì†Œ ì°¾ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        #map {
            height: 400px; /* ì§€ë„ì˜ ë†’ì´ ì„¤ì • */
            width: 100%;
            border-radius: 0.5rem; /* Tailwind rounded-lg */
            border: 1px solid #d1d5db; /* Tailwind border-gray-300 */
            margin-bottom: 1rem;
        }
        .info-window-content h3 {
            font-weight: bold;
            margin-bottom: 0.25rem;
        }
        .info-window-content p {
            font-size: 0.875rem; /* text-sm */
            line-height: 1.25rem; /* leading-tight */
        }
        /* Custom styles for the slider labels to position them correctly */
        .slider-label-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 0.5rem; /* Adjust as needed */
            margin-bottom: 0.25rem;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div class="bg-white p-8 rounded-lg shadow-xl w-full max-w-2xl">
        <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">ï¿½ ìµœì  ë¯¸íŒ… ì¥ì†Œ ì°¾ê¸°</h1>
        <form id="locationForm" class="space-y-4">
            <div>
                <label for="map" class="block text-gray-700 text-sm font-semibold mb-2">
                    ì§€ë„ë¥¼ í´ë¦­í•˜ì—¬ ì¶œë°œì§€ ìœ„ì¹˜ë¥¼ ì„ íƒí•˜ì„¸ìš” (ì—¬ëŸ¬ ê³³ ì„ íƒ ê°€ëŠ¥)
                </label>
                <div id="map"></div>
                <input type="hidden" name="coords_json" id="coords_json">
            </div>

            <button type="button" id="useCurrentLocationBtn"
                    class="w-full bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 transition duration-300 ease-in-out transform hover:scale-105 mb-2">
                ğŸ“ í˜„ìœ„ì¹˜ë¡œ ì…ë ¥
            </button>
            <div id="currentLocationLoading" class="hidden text-center text-indigo-600 font-semibold mb-2">
                í˜„ìœ„ì¹˜ í™•ì¸ ì¤‘...
            </div>

            <button type="button" id="clearMarkersBtn"
                    class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-2 transition duration-300 ease-in-out transform hover:scale-105 mb-4">
                ì¶œë°œì§€ í•€ ëª¨ë‘ ì œê±°
            </button>

            <!-- ëŒë‹¤(ê°€ì¤‘ì¹˜) ìŠ¬ë¼ì´ë” -->
            <div class="mb-4">
                <label for="lambdaSlider" class="block text-gray-700 text-sm font-semibold mb-2">
                    <span class="block text-center mb-1">
                        ìµœì í™” ê¸°ì¤€ ì„ íƒ
                    </span>
                    <div class="slider-label-container">
                        <span class="font-bold text-blue-700 text-lg">í‰ë“±</span>
                        <span class="font-bold text-green-700 text-lg">íš¨ìœ¨</span>
                    </div>
                    <input type="range" id="lambdaSlider" name="lambda" min="0" max="1" step="0.1" value="0.7"
                           class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg">
                    <span class="block text-center text-lg font-medium text-gray-800 mt-1">
                        ê°€ì¤‘ì¹˜ (Î»): <span id="lambdaValue">0.7</span>
                    </span>
                </label>
            </div>

            <button type="submit"
                    class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-300 ease-in-out transform hover:scale-105">
                ì¥ì†Œ ì°¾ê¸°
            </button>
        </form>

        <div id="loadingIndicator" class="hidden text-center mt-4 text-blue-600 font-semibold">
            <div class="flex items-center justify-center space-x-2">
                <svg class="animate-spin h-5 w-5 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <span>ì¥ì†Œë¥¼ ì°¾ê³  ìˆìŠµë‹ˆë‹¤...</span>
            </div>
        </div>

        <div id="resultsDisplay" class="mt-8 hidden">
            <!-- ê²°ê³¼ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤ -->
        </div>
    </div>

    <script>
        let map;
        let originMarkers = []; // ì‚¬ìš©ìê°€ í´ë¦­í•˜ì—¬ ì¶”ê°€í•œ ì¶œë°œì§€ ë§ˆì»¤ ë°°ì—´
        let resultMarkers = []; // ìµœì  ì—­, ì¹´í˜ ë“± ê²°ê³¼ ë§ˆì»¤ ë°°ì—´
        let originCoords = []; // Flaskë¡œ ì „ì†¡ë  ìœ„ë„/ê²½ë„ ê°ì²´ ë°°ì—´
        let infoWindow; // ë§ˆì»¤ í´ë¦­ ì‹œ ì •ë³´ ì°½
        let directionsService; // ê²½ë¡œ ê²€ìƒ‰ ì„œë¹„ìŠ¤
        let directionsRenderers = []; // ê²½ë¡œ í‘œì‹œ ë Œë”ëŸ¬ ë°°ì—´ (ê° ì¶œë°œì§€ë§ˆë‹¤)

        function initMap() {
            const seoul = { lat: 37.5665, lng: 126.9780 };
            map = new google.maps.Map(document.getElementById("map"), {
                center: seoul,
                zoom: 12,
                gestureHandling: "greedy"
            });
            infoWindow = new google.maps.InfoWindow();
            directionsService = new google.maps.DirectionsService(); // DirectionsService ì´ˆê¸°í™”

            map.addListener("click", (e) => {
                addOriginMarker(e.latLng);
            });

            document.getElementById("clearMarkersBtn").addEventListener("click", clearOriginMarkers);
            document.getElementById("locationForm").addEventListener("submit", handleFormSubmit);
            document.getElementById("useCurrentLocationBtn").addEventListener("click", useCurrentLocation); // í˜„ìœ„ì¹˜ ë²„íŠ¼ ì´ë²¤íŠ¸

            const lambdaSlider = document.getElementById("lambdaSlider");
            const lambdaValueSpan = document.getElementById("lambdaValue");
            lambdaSlider.addEventListener("input", () => {
                lambdaValueSpan.textContent = parseFloat(lambdaSlider.value).toFixed(1);
            });
        }

        // í˜„ìœ„ì¹˜ ì‚¬ìš© í•¨ìˆ˜
        function useCurrentLocation() {
            document.getElementById("currentLocationLoading").classList.remove("hidden"); // ë¡œë”© í‘œì‹œ
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const pos = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude,
                        };
                        addOriginMarker(pos); // í˜„ìœ„ì¹˜ë¥¼ ì¶œë°œì§€ ë§ˆì»¤ë¡œ ì¶”ê°€
                        map.setCenter(pos); // ì§€ë„ë¥¼ í˜„ìœ„ì¹˜ë¡œ ì´ë™
                        map.setZoom(14); // ì¤Œ ë ˆë²¨ ì¡°ì •
                        document.getElementById("currentLocationLoading").classList.add("hidden");
                    },
                    (error) => {
                        document.getElementById("currentLocationLoading").classList.add("hidden");
                        let errorMessage = "í˜„ìœ„ì¹˜ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
                        switch (error.code) {
                            case error.PERMISSION_DENIED:
                                errorMessage = "ìœ„ì¹˜ ì •ë³´ ì‚¬ìš© ê¶Œí•œì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤.";
                                break;
                            case error.POSITION_UNAVAILABLE:
                                errorMessage = "ìœ„ì¹˜ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
                                break;
                            case error.TIMEOUT:
                                errorMessage = "ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì‹œê°„ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤.";
                                break;
                        }
                        alert(errorMessage);
                        console.error("Geolocation Error:", error);
                    }
                );
            } else {
                document.getElementById("currentLocationLoading").classList.add("hidden");
                alert("ì´ ë¸Œë¼ìš°ì €ëŠ” í˜„ìœ„ì¹˜ ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
            }
        }

        // ì¶œë°œì§€ ë§ˆì»¤ ì¶”ê°€
        function addOriginMarker(location) {
            const marker = new google.maps.Marker({
                position: location,
                map: map,
                icon: {
                    url: "http://maps.google.com/mapfiles/ms/icons/red-dot.png"
                }
            });
            originMarkers.push(marker);
            originCoords.push({ lat: location.lat(), lng: location.lng() });
            console.log("í˜„ì¬ ì„ íƒëœ ì¶œë°œì§€ ì¢Œí‘œ:", originCoords);
        }

        // ì¶œë°œì§€ ë§ˆì»¤ ëª¨ë‘ ì œê±°
        function clearOriginMarkers() {
            for (let i = 0; i < originMarkers.length; i++) {
                originMarkers[i].setMap(null);
            }
            originMarkers = [];
            originCoords = [];
            document.getElementById("coords_json").value = "";
            console.log("ëª¨ë“  ì¶œë°œì§€ í•€ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.");
        }

        // ê²°ê³¼ ë§ˆì»¤ ë° ê²½ë¡œ ì œê±° (ìƒˆ ê²€ìƒ‰ ì‹œ ì´ì „ ê²°ê³¼ ì œê±°ìš©)
        function clearResultMarkers() {
            for (let i = 0; i < resultMarkers.length; i++) {
                resultMarkers[i].setMap(null);
            }
            resultMarkers = [];
            if (infoWindow) {
                infoWindow.close();
            }
            // ëª¨ë“  ê²½ë¡œ ë Œë”ëŸ¬ ì œê±°
            for (let i = 0; i < directionsRenderers.length; i++) {
                directionsRenderers[i].setMap(null);
            }
            directionsRenderers = [];
        }

        // í¼ ì œì¶œ í•¸ë“¤ëŸ¬ (AJAX ìš”ì²­)
        async function handleFormSubmit(event) {
            event.preventDefault();

            if (originCoords.length === 0) {
                alert("ìµœì†Œ í•˜ë‚˜ ì´ìƒì˜ ì¶œë°œì§€ ìœ„ì¹˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.");
                return;
            }

            clearResultMarkers();
            document.getElementById("resultsDisplay").classList.add("hidden");
            document.getElementById("loadingIndicator").classList.remove("hidden");

            const formData = new FormData();
            formData.append('coords_json', JSON.stringify(originCoords));
            formData.append('lambda', document.getElementById("lambdaSlider").value);

            try {
                const response = await fetch('/api/find_places', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();

                if (response.ok) {
                    displayResultsOnMap(result);
                    displayResultsText(result);
                } else {
                    alert(`ì˜¤ë¥˜: ${result.error || result.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'}`);
                    console.error("API Error:", result);
                    document.getElementById("resultsDisplay").innerHTML = `<p class="text-red-600 text-lg font-medium text-center p-4 bg-red-50 rounded-lg border border-red-200">
                                                                            ì˜¤ë¥˜: ${result.error || result.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'}
                                                                          </p>`;
                    document.getElementById("resultsDisplay").classList.remove("hidden");
                }
            } catch (error) {
                console.error("Fetch Error:", error);
                alert("ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë˜ëŠ” ì„œë²„ ì‘ë‹µ ë¬¸ì œ ë°œìƒ!");
                document.getElementById("resultsDisplay").innerHTML = `<p class="text-red-600 text-lg font-medium text-center p-4 bg-red-50 rounded-lg border border-red-200">
                                                                        ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë˜ëŠ” ì„œë²„ ì‘ë‹µ ë¬¸ì œ ë°œìƒ: ${error.message}
                                                                      </p>`;
                document.getElementById("resultsDisplay").classList.remove("hidden");
            } finally {
                document.getElementById("loadingIndicator").classList.add("hidden");
            }
        }

        // ì§€ë„ì— ê²°ê³¼ ë§ˆì»¤ ë° ê²½ë¡œ í‘œì‹œ
        function displayResultsOnMap(data) {
            if (data.best_station) {
                const stationPos = { lat: data.best_station.lat, lng: data.best_station.lng };

                // ìµœì  ì—­ ë§ˆì»¤ (íŒŒë€ìƒ‰)
                const stationMarker = new google.maps.Marker({
                    position: stationPos,
                    map: map,
                    icon: {
                        url: "http://maps.google.com/mapfiles/ms/icons/blue-dot.png"
                    },
                    title: data.best_station.name
                });
                resultMarkers.push(stationMarker);

                // ì •ë³´ ì°½ ë‚´ìš©
                let stationContent = `
                    <div class="info-window-content">
                        <h3>ğŸ“ ìµœì  ë¯¸íŒ…ì—­: ${data.best_station.name}</h3>
                        <p>í‰ê·  ì´ë™ ì‹œê°„: ${data.best_station.avg_min.toFixed(1)}ë¶„</p>
                        <p>ìµœëŒ€ ì´ë™ ì‹œê°„: ${data.best_station.max_min.toFixed(1)}ë¶„</p>
                `;
                if (data.best_station.times && data.best_station.times.length > 0) {
                    stationContent += `<p>ê°œë³„ ì´ë™ ì‹œê°„ (ì¼ë¶€):</p><ul>`;
                    const timesToShow = data.best_station.times.slice(0, Math.min(data.best_station.times.length, 3));
                    timesToShow.forEach((time, index) => {
                        stationContent += `<li>ì¶œë°œì§€ ${index + 1}: ${time.toFixed(1)}ë¶„</li>`;
                    });
                    stationContent += `</ul>`;
                }
                stationContent += `</div>`;

                stationMarker.addListener("click", () => {
                    infoWindow.setContent(stationContent);
                    infoWindow.open(map, stationMarker);
                });

                // ê° ì¶œë°œì§€ì—ì„œ ìµœì  ì—­ê¹Œì§€ì˜ ê²½ë¡œ ê·¸ë¦¬ê¸°
                const bounds = new google.maps.LatLngBounds();
                originMarkers.forEach((originMarker, index) => {
                    bounds.extend(originMarker.getPosition()); // ì¶œë°œì§€ ë§ˆì»¤ë„ boundsì— í¬í•¨

                    const request = {
                        origin: originMarker.getPosition(),
                        destination: stationPos,
                        travelMode: google.maps.TravelMode.TRANSIT, // ëŒ€ì¤‘êµí†µ ê²½ë¡œ
                    };

                    directionsService.route(request, (result, status) => {
                        if (status === google.maps.DirectionsStatus.OK) {
                            const directionsRenderer = new google.maps.DirectionsRenderer({
                                map: map,
                                suppressMarkers: true, // ê¸°ë³¸ ë§ˆì»¤ëŠ” ìˆ¨ê¸°ê³  ìš°ë¦¬ê°€ ë§Œë“  ë§ˆì»¤ë§Œ ì‚¬ìš©
                                polylineOptions: {
                                    strokeColor: 'blue', // ê²½ë¡œ ìƒ‰ìƒ ì„¤ì • (ì˜ˆ: íŒŒë€ìƒ‰)
                                    strokeOpacity: 0.6,
                                    strokeWeight: 4
                                }
                            });
                            directionsRenderer.setDirections(result);
                            directionsRenderers.push(directionsRenderer); // ë Œë”ëŸ¬ë¥¼ ë°°ì—´ì— ì¶”ê°€í•˜ì—¬ ë‚˜ì¤‘ì— ì§€ìš¸ ìˆ˜ ìˆë„ë¡ í•¨
                        } else {
                            console.error(`ì¶œë°œì§€ ${index + 1}ì—ì„œ ì—­ê¹Œì§€ì˜ ê²½ë¡œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${status}`);
                        }
                    });
                });
                bounds.extend(stationPos); // ìµœì  ì—­ ë§ˆì»¤ë„ boundsì— í¬í•¨

                // ì¹´í˜ ë§ˆì»¤ (ì´ˆë¡ìƒ‰)
                if (data.cafes_top10 && data.cafes_top10.length > 0) {
                    data.cafes_top10.forEach(cafe => {
                        const cafePos = { lat: cafe.lat, lng: cafe.lng };
                        const cafeMarker = new google.maps.Marker({
                            position: cafePos,
                            map: map,
                            icon: {
                                url: "http://maps.google.com/mapfiles/ms/icons/green-dot.png"
                            },
                            title: cafe.name
                        });
                        resultMarkers.push(cafeMarker);
                        bounds.extend(cafePos); // ì¹´í˜ ë§ˆì»¤ë„ boundsì— í¬í•¨

                        const cafeContent = `
                            <div class="info-window-content">
                                <h3>â˜• ì¹´í˜: ${cafe.name}</h3>
                                <p>ê±°ë¦¬: ${cafe.distance_km.toFixed(2)} km</p>
                                <p>ìœ„ì¹˜: ${cafe.lat.toFixed(6)}, ${cafe.lng.toFixed(6)}</p>
                            </div>
                        `;
                        cafeMarker.addListener("click", () => {
                            infoWindow.setContent(cafeContent);
                            infoWindow.open(map, cafeMarker);
                        });
                    });
                }
                map.fitBounds(bounds); // ëª¨ë“  ë§ˆì»¤ì™€ ê²½ë¡œë¥¼ í¬í•¨í•˜ë„ë¡ ì§€ë„ ë·° ì¡°ì •

            } else {
                alert("ì£„ì†¡í•©ë‹ˆë‹¤. ì œê³µëœ ì¢Œí‘œì—ì„œ ìµœì ì˜ ì—­ì„ ì°¾ì„ ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤.");
            }
        }

        // í…ìŠ¤íŠ¸ ê²°ê³¼ í‘œì‹œ (result.htmlì˜ ë‚´ìš© í†µí•©)
        function displayResultsText(data) {
            const resultsDisplay = document.getElementById("resultsDisplay");
            let htmlContent = '';

            if (data.best_station) {
                htmlContent += `
                    <div class="mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200">
                        <h2 class="text-2xl font-semibold text-blue-800 mb-3">ğŸ“ ìµœì  ë¯¸íŒ…ì—­</h2>
                        <p class="text-lg text-gray-700 mb-2"><strong>ì´ë¦„:</strong> ${data.best_station.name}</p>
                        <p class="text-lg text-gray-700 mb-2"><strong>ìœ„ì¹˜:</strong> ${data.best_station.lat.toFixed(6)}, ${data.best_station.lng.toFixed(6)}</p>
                        <p class="text-lg text-gray-700 mb-2"><strong>í‰ê·  ì´ë™ ì‹œê°„:</strong> ${data.best_station.avg_min.toFixed(1)}ë¶„</p>
                        <p class="text-lg text-gray-700 mb-2"><strong>ìµœëŒ€ ì´ë™ ì‹œê°„:</strong> ${data.best_station.max_min.toFixed(1)}ë¶„</p>
                `;

                // ê° ì¶œë°œì§€ë¡œë¶€í„°ì˜ ì´ë™ ì‹œê°„ ëª©ë¡ ì¶”ê°€
                if (data.best_station.times && data.best_station.times.length > 0) {
                    htmlContent += `<h3 class="text-xl font-semibold text-blue-700 mt-4 mb-2">ê° ì¶œë°œì§€ì—ì„œ ì—­ê¹Œì§€ ì´ë™ ì‹œê°„:</h3>`;
                    htmlContent += `<ul class="list-disc pl-5 space-y-1 text-gray-700">`;
                    data.best_station.times.forEach((time, index) => {
                        htmlContent += `<li>ì¶œë°œì§€ ${index + 1}: ${time.toFixed(1)}ë¶„</li>`;
                    });
                    htmlContent += `</ul>`;
                }
                htmlContent += `</div>`;

                if (data.cafes_top10 && data.cafes_top10.length > 0) {
                    htmlContent += `
                        <div class="mb-6 p-4 bg-green-50 rounded-lg border border-green-200">
                            <h2 class="text-2xl font-semibold text-green-800 mb-3">â˜• ì£¼ë³€ ì¹´í˜ (ìƒìœ„ 10ê°œ)</h2>
                            <ul class="list-disc pl-5 space-y-2 text-gray-700">
                    `;
                    data.cafes_top10.forEach(cafe => {
                        htmlContent += `
                                <li>
                                    <strong>${cafe.name}</strong> (ê±°ë¦¬: ${cafe.distance_km.toFixed(2)} km)
                                    <span class="text-sm text-gray-500">(${cafe.lat.toFixed(6)}, ${cafe.lng.toFixed(6)})</span>
                                </li>
                        `;
                    });
                    htmlContent += `
                            </ul>
                        </div>
                    `;
                } else {
                    htmlContent += `
                        <div class="mb-6 p-4 bg-green-50 rounded-lg border border-green-200">
                            <h2 class="text-2xl font-semibold text-green-800 mb-3">â˜• ì£¼ë³€ ì¹´í˜</h2>
                            <p class="text-gray-700">ì£¼ë³€ì— ì°¾ì„ ìˆ˜ ìˆëŠ” ì¹´í˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                        </div>
                    `;
                }
            } else if (data.message) {
                htmlContent += `
                    <p class="text-red-600 text-lg font-medium text-center p-4 bg-red-50 rounded-lg border border-red-200">
                        ${data.message}
                    </p>
                `;
            } else {
                 htmlContent += `
                    <p class="text-red-600 text-lg font-medium text-center p-4 bg-red-50 rounded-lg border border-red-200">
                        ì£„ì†¡í•©ë‹ˆë‹¤. ìœ íš¨í•œ ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.
                    </p>
                `;
            }
            resultsDisplay.innerHTML = htmlContent;
            resultsDisplay.classList.remove("hidden");
        }
    </script>
    <!-- YOUR_GOOGLE_MAPS_API_KEYë¥¼ ì‹¤ì œ Google Maps API í‚¤ë¡œ êµì²´í•˜ì„¸ìš” -->
    <!-- ë°˜ë“œì‹œ Maps JavaScript API, Places API, Distance Matrix API, Directions APIê°€ í™œì„±í™”ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD1gcVpxIcq6YyezPIbXpos51yiDlH5LyQ&callback=initMap"></script>
</body>
</html>